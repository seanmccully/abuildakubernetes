# abuildakubernetes
Deploy a [MultiNode] Kubernetes Cluster. Mostly work in progress.

### TODO: 
 * deploy nodes as a control plane or worker node only. 
 * add argument parsing for running sections (i.e. script building sources everytime).
 * Try to make things system independent, mostly requires systemd currently. 

Project for building a multinode kubernetes cluster, 
  Configuration  `config.yaml`.  Sources are clone from source control, and built on each server. 
  Cluster services are run from local built binaries as a systemd service. 

# Scripts
The process is broken down into multiple scripts.
## proc.sh
 * The main process, setups some configuration and templates values, runs the other scripts for building out the services and certificates. 
## source-builder.sh
 * Clones and build the source repos on the hosts defined in hosts.yaml
## cert-manager.sh
 * Creates the certificate authorities and required certs for the hosts, certs defined in certs.yaml.
## setup-sources.sh
 * Configures the sources on each host. 
## common.sh
  * Common Values and functions.

# Configuration 
  Configuration is handled with `config.yaml` and `certs.yaml`
## config.yaml
  * Define the hosts that will be deployed and configured
  *  Define a VRRP VIP and service and cluster CIDR(s)
  * Defines where to build sources and CA(s).
  * Defines where to install kube configuration and service files. 
## certs.yaml
  * Defines the certs that will be created for the kubernetes cluster. Host based certs will be generated based on the hosts.yaml which is autogenerated. 
## hosts.yaml
  * Autogenerated from hosts defined in `config.yaml`
Autogenerated file
